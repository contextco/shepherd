<%= form_with model: service_object, url:, method: form_method do |form| %>
  <div class="flex flex-col gap-6">
    <div class="flex items-center justify-between">
      <%= form.label :name, class: 'font-medium' %>
      <%= form.text_field :name,
                          required: true,
                          'data-1p-ignore': true,
                          'data-lpignore': true,
                          class: 'w-1/2 p-2 rounded-md' %>
    </div>

    <div class="flex items-center justify-between">
      <%= form.label :image, class: 'font-medium' %>

      <%= form.text_field :image,
                          required: true,
                          class: 'w-1/2 p-2 rounded-md' %>
    </div>

    <div class="flex flex-col gap-4">
      <span class="font-medium">Resources</span>
      <div class="flex flex-col gap-8 rounded-md p-8 pt-10 border border-stone-400 w-full items-start px-8">
        <div class="flex items-start grow w-full gap-8">
          <span class="font-medium w-16">CPU</span>
          <%= render Services::CPUSliderComponent.new(form: ) %>
        </div>
        <div class="flex items-start grow w-full gap-8">
          <span class="font-medium w-16">RAM</span>
          <%= render Services::MemorySliderComponent.new(form: ) %>
        </div>
      </div>
    </div>

    <%# TODO: add env variables and secrets. Env variables will need a checkbox to denote if hard coded or the user should override %>

    <div class="flex items-start justify-between gap-10" data-controller="dynamic-elements">
      <div class="flex flex-col gap-1 max-w-96">
        <span class="font-medium text-stone-800 flex-none">Environment Variables</span>
        <span class="text-stone-600 text-sm">
          Do not put sensitive values here. Sensitive values should be stored in secrets.
        </span>
      </div>
        <div class="flex flex-col gap-4 rounded-md p-4 border border-stone-400 w-full max-w-4xl" data-dynamic-elements-target="container">
          <%= form.fields_for :environment_variables do |env_var_form| %>
            <%= render Services::EnvironmentVariableComponent.new(form: env_var_form) %>
          <% end %>
          <div class="text-sm rounded-md cursor-pointer w-fit" data-action="click->dynamic-elements#addElement">
            + Add
          </div>
        </div>
      <template data-dynamic-elements-target="template">
        <%= render Services::EnvironmentVariableComponent.new(form: ) %>
      </template>
    </div>

    <div class="flex items-start justify-between gap-10" data-controller="dynamic-elements">
      <div class="flex flex-col gap-1 max-w-96">
        <span class="font-medium text-stone-800 flex-none">Secrets</span>
        <span class="text-stone-600 text-sm">
          Client provided secrets. Use for sensitive values like API keys, passwords, etc.
        </span>
      </div>

      <%= form.fields_for :secrets do |secret_form| %>
        <div class="flex flex-col gap-4 rounded-md p-4 border border-stone-400 w-full max-w-4xl">
          <div class="flex flex-col gap-4" data-dynamic-elements-target="container">
              <%= render Services::SecretComponent.new(form: secret_form) %>
          </div>
          <div class="text-sm p-2 rounded-md cursor-pointer w-fit" data-action="click->dynamic-elements#addElement">
            + Add
          </div>
        </div>
        <template data-dynamic-elements-target="template">
          <%= render Services::SecretComponent.new(form: secret_form) %>
        </template>
      <% end %>
    </div>

    <%= form.submit update_create_text, class: 'px-3 py-2 mt-2 bg-stone-700 rounded-md text-stone-100 cursor-pointer w-fit' %>
  </div>
<% end %>
