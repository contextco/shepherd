<div class="flex h-full">
  <div class="w-96 border-r min-h-full flex flex-col gap-2">
    <div class="flex w-full justify-between p-4">
      <div class="flex flex-col">
        <span class="text-xs sm:text-sm text-stone-400 font-medium">Application</span>
        <div class="flex gap-2 items-center sm:text-2xl">
          <span class="font-medium w-fit"><%= @app.name %></span>
        </div>
      </div>

      <div class="flex flex-col justify-center">
        <div class="flex gap-2 items-center">

          <%= link_to new_project_version_path(@app), class: 'px-2 py-1 text-sm flex gap-1 items-center rounded-md hover:bg-stone-100 duration-200' do %>
            <%= heroicon 'plus', variant: :outline, class: 'size-4' %>
            New Version
          <% end %>
          <%= link_to edit_project_path(@app), class: 'p-2' do %>
            <%= heroicon 'cog', variant: :outline, class: 'size-5' %>
          <% end %>
        </div>
      </div>
    </div>

    <div class="flex flex-col gap-2 overflow-y-auto px-4 pb-8" id="<%= dom_id(@app, :version_list) %>" data-preserve-scroll>
      <% @app.project_versions.order(created_at: :desc).each do |version| %>
        <%= link_to version_path(version), class: ["p-2 flex flex-col gap-2 duration-200", {
          'bg-stone-100 border border-stone-400': version == @version,
          'hover:bg-stone-100 border-transparent border': version != @version
        }] do %>
          <div class="flex justify-between item">
            <div  class="font-semibold">
              <%= version.version %>
            </div>
            <div class="text-sm text-stone-600">
              <%= version.created_at.to_formatted_s(:short) %>
            </div>
          </div>

          <div class="flex justify-between items-center text-sm">
            <div class="flex gap-4 items-center">
              <%= pluralize(version.services.count, 'service') %>
            </div>

            <div class="div uppercase">
              <%= image_tag 'kubernetes-icon-black.svg', class: 'h-4' if version.published? %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>

  </div>

  <div class="h-full w-full flex flex-col gap-10 sm:px-20 px-8 py-8 max-w-6xl mx-auto">
    <%= yield %>
  </div>
</div>
